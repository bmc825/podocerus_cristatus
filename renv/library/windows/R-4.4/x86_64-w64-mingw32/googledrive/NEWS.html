
<!DOCTYPE html>


<html lang="en" data-content_root="../../../../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>googledrive 2.1.1 &#8212; Chapter 3 Data Analysis</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../../../../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../../../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../../../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../../../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'renv/library/windows/R-4.4/x86_64-w64-mingw32/googledrive/NEWS';</script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../../../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../../../../_static/Podocerus_bw.png" class="logo__image only-light" alt="Chapter 3 Data Analysis - Home"/>
    <img src="../../../../../../_static/Podocerus_bw.png" class="logo__image only-dark pst-js-only" alt="Chapter 3 Data Analysis - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../../../../intro.html">
                    Data Analysis of P. cristatus
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../../../../scripts/Load_Packages.html">Load Packages</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../../../01_Population/01_intro.html">Question 1</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../01_Population/01_data_cleaning.html">Data Cleaning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../01_Population/Clustering.html">Cluster Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../01_Population/Population_structure.html">Population Structure Analysis</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../../../02_Occurrence/02_intro.html">Question 2</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../02_Occurrence/02_data_cleaning.html">Data Cleaning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../02_Occurrence/Model_1.html">Model 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../02_Occurrence/Model_2.html">Model 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../02_Occurrence/Model_3.html">Model 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../02_Occurrence/Model_exp.html">Substrate Experiment Model</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../../../03_Camouflage/03_intro.html">Question 3</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../03_Camouflage/03_data_cleaning.html">Data Cleaning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../03_Camouflage/Model_4.html">Model 4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../03_Camouflage/Model_5.html">Model 5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../03_Camouflage/Model_6.html">Model 6</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../../../04_Phylogenetic/04_intro.html">Question 4</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../04_Phylogenetic/Geneious_protocol.html">Geneious Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../04_Phylogenetic/Phylogenetic_analysis.html">Phylogenetic Analysis</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../../../../_sources/renv/library/windows/R-4.4/x86_64-w64-mingw32/googledrive/NEWS.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>googledrive 2.1.1</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">googledrive 2.1.1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#googledrive-2-1-0">googledrive 2.1.0</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#syncing-up-with-gargle">Syncing up with gargle</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#shared-drives">Shared drives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#other">Other</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#googledrive-2-0-0">googledrive 2.0.0</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#team-drives-are-dead-long-live-shared-drives">Team Drives are dead! Long live shared drives!</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#single-parenting-and-shortcuts">Single parenting and shortcuts</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#user-interface">User interface</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#other-changes">Other changes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dependency-changes">Dependency changes</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#googledrive-1-0-1">googledrive 1.0.1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#googledrive-1-0-0">googledrive 1.0.0</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#auth-from-gargle">Auth from gargle</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-that-a-user-will-notice">Changes that a user will notice</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overwrite-na-true-false-and-drive-put"><code class="docutils literal notranslate"><span class="pre">overwrite</span> <span class="pre">=</span> <span class="pre">NA</span> <span class="pre">/</span> <span class="pre">TRUE</span> <span class="pre">/</span> <span class="pre">FALSE</span></code> and <code class="docutils literal notranslate"><span class="pre">drive_put()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#overwrite-na-true-false"><code class="docutils literal notranslate"><span class="pre">overwrite</span> <span class="pre">=</span> <span class="pre">NA</span> <span class="pre">/</span> <span class="pre">TRUE</span> <span class="pre">/</span> <span class="pre">FALSE</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#drive-put"><code class="docutils literal notranslate"><span class="pre">drive_put()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Other changes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Dependency changes</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#googledrive-0-1-3">googledrive 0.1.3</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#googledrive-0-1-2">googledrive 0.1.2</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#googledrive-0-1-1">googledrive 0.1.1</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="googledrive-2-1-1">
<h1>googledrive 2.1.1<a class="headerlink" href="#googledrive-2-1-1" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">drive_auth(subject</span> <span class="pre">=)</span></code> is a new argument that can be used with
<code class="docutils literal notranslate"><span class="pre">drive_auth(path</span> <span class="pre">=)</span></code>, i.e. when using a service account. The <code class="docutils literal notranslate"><span class="pre">path</span></code> and
<code class="docutils literal notranslate"><span class="pre">subject</span></code> arguments are ultimately processed by
<code class="docutils literal notranslate"><span class="pre">gargle::credentials_service_account()</span></code> and support the use of a service
account to impersonate a normal user (#413).</p></li>
<li><p>All requests now route through <code class="docutils literal notranslate"><span class="pre">gargle::request_retry()</span></code> (#380).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drive_scopes()</span></code> is a new function to access scopes relevant to the Drive API.
When called without arguments, <code class="docutils literal notranslate"><span class="pre">drive_scopes()</span></code> returns a named vector of
scopes, where the names are the associated short aliases. <code class="docutils literal notranslate"><span class="pre">drive_scopes()</span></code> can
also be called with a character vector; any element that’s recognized as a
short alias is replaced with the associated full scope (#430).</p></li>
<li><p>Various internal changes to sync up with gargle v1.5.0.</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="googledrive-2-1-0">
<h1>googledrive 2.1.0<a class="headerlink" href="#googledrive-2-1-0" title="Link to this heading">#</a></h1>
<section id="syncing-up-with-gargle">
<h2>Syncing up with gargle<a class="headerlink" href="#syncing-up-with-gargle" title="Link to this heading">#</a></h2>
<p>Version 1.3.0 of gargle introduced some changes around OAuth and googledrive is syncing up that:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">drive_oauth_client()</span></code> is a new function to replace the now-deprecated <code class="docutils literal notranslate"><span class="pre">drive_oauth_app()</span></code>.</p></li>
<li><p>The new <code class="docutils literal notranslate"><span class="pre">client</span></code> argument of <code class="docutils literal notranslate"><span class="pre">drive_auth_configure()</span></code> replaces the now-deprecated <code class="docutils literal notranslate"><span class="pre">app</span></code> argument.</p></li>
<li><p>The documentation of <code class="docutils literal notranslate"><span class="pre">drive_auth_configure()</span></code> emphasizes that the preferred way to “bring your own OAuth client” is by providing the JSON downloaded from Google Developers Console.</p></li>
</ul>
</section>
<section id="shared-drives">
<h2>Shared drives<a class="headerlink" href="#shared-drives" title="Link to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">drive_ls(recursive</span> <span class="pre">=</span> <span class="pre">TRUE)</span></code> now works when the target folder is on a shared drive (#265, &#64;Falnesio).</p>
<p><code class="docutils literal notranslate"><span class="pre">drive_mv()</span></code> no longer errors with “A shared drive item must have exactly one parent.” when moving a file on a shared drive (#377).</p>
</section>
<section id="other">
<h2>Other<a class="headerlink" href="#other" title="Link to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">drive_auth()</span></code> now warns if the user specifies both <code class="docutils literal notranslate"><span class="pre">email</span></code> and <code class="docutils literal notranslate"><span class="pre">path</span></code>, because this is almost always an error (#420).</p>
<p><code class="docutils literal notranslate"><span class="pre">drive_auth_config()</span></code> was deprecated in googledrive 1.0.0 (released 2019-08-19) and is now defunct.</p>
<p><code class="docutils literal notranslate"><span class="pre">drive_example()</span></code> was deprecated in googledrive 2.0.0 (released 2021-07-08) and is now defunct.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="googledrive-2-0-0">
<h1>googledrive 2.0.0<a class="headerlink" href="#googledrive-2-0-0" title="Link to this heading">#</a></h1>
<section id="team-drives-are-dead-long-live-shared-drives">
<h2>Team Drives are dead! Long live shared drives!<a class="headerlink" href="#team-drives-are-dead-long-live-shared-drives" title="Link to this heading">#</a></h2>
<p>Google Drive has rebranded Team Drives as <strong>shared drives</strong>.
While anyone can have a <strong>My Drive</strong>, shared drives are only available for Google Workspace (previously known as G Suite).
Shared drives and the files within are owned by a team/organization, as opposed to an individual.</p>
<p>In googledrive, all <code class="docutils literal notranslate"><span class="pre">team_drive_*()</span></code> functions have been deprecated, in favor of
their <code class="docutils literal notranslate"><span class="pre">shared_drive_*()</span></code> successors.
Likewise, any <code class="docutils literal notranslate"><span class="pre">team_drive</span></code> argument has been deprecated, in favor of a new <code class="docutils literal notranslate"><span class="pre">shared_drive</span></code> argument.
The terms used to describe which collections to search have also changed slightly, with <code class="docutils literal notranslate"><span class="pre">&quot;allDrives&quot;</span></code> replacing <code class="docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code>.
This applies to the <code class="docutils literal notranslate"><span class="pre">corpus</span></code> argument of <code class="docutils literal notranslate"><span class="pre">drive_find()</span></code> and <code class="docutils literal notranslate"><span class="pre">drive_get()</span></code>.</p>
<p>Where to learn more:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://workspaceupdates.googleblog.com/2019/04/shared-drives.html">Team Drives is being renamed to shared drives</a> from Google Workspace blog</p></li>
<li><p><a class="reference external" href="https://cloud.google.com/blog/products/application-development/upcoming-changes-to-the-google-drive-api-and-google-picker-api">Upcoming changes to the Google Drive API and Google Picker API</a> from the Google Cloud blog</p></li>
</ul>
</section>
<section id="single-parenting-and-shortcuts">
<h2>Single parenting and shortcuts<a class="headerlink" href="#single-parenting-and-shortcuts" title="Link to this heading">#</a></h2>
<p>As of 2020-09-30, Drive no longer allows a file to be placed in multiple folders; going forward, every file will have exactly 1 parent folder.
In many cases that parent is just the top-level or root folder of your “My Drive” or of a shared drive.</p>
<p>This change has been accompanied by the introduction of file <strong>shortcuts</strong>, which function much like symbolic or “soft” links.
Shortcuts are the new way to make a file appear to be in more than one place or, said another way, the new way for one Drive file to be associated with more than one Drive filepath.
A shortcut is a special type of Drive file, characterized by the <code class="docutils literal notranslate"><span class="pre">application/vnd.google-apps.shortcut</span></code> MIME type.
You can make a shortcut to any Drive file, including to a Drive folder.</p>
<p>Drive has been migrating existing files to the one-parent state, i.e., “single parenting” them.
Drive selects the most suitable parent folder to keep, “based on the hierarchy’s properties”, and replaces any other parent-child relationships with a shortcut.</p>
<p>New functions related to shortcuts:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">shortcut_create()</span></code>: creates a shortcut to a specific Drive file (or folder).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shortcut_resolve()</span></code>: resolves a shortcut to its target, i.e. the file it
refers to. Works for multiple files at once, i.e. the input can be a mix of
shortcuts and non-shortcuts. The non-shortcuts are passed through and the
shortcuts are replaced by their targets.</p></li>
</ul>
<p>How interacts with googledrive’s support for specifying file by filepath:</p>
<ul class="simple">
<li><p>Main principle: shortcuts are first-class Drive files that we assume users
will need to manipulate with googledrive. In general, there is no automatic
resolution to the target file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drive_reveal(what</span> <span class="pre">=</span> <span class="pre">&quot;path&quot;)</span></code> returns the canonical path, i.e. there will be
no shortcuts among the non-terminal “folder” parts of the returned path.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drive_get(path</span> <span class="pre">=</span> <span class="pre">&quot;foo/&quot;)</span></code> can retrieve a folder named “foo” or a shortcut
named “foo”, whose target is a folder.</p></li>
<li><p>When a shortcut-to-a-folder is specified as the <code class="docutils literal notranslate"><span class="pre">path</span></code>, in a context where it
unambiguously specifies a parent folder, the <code class="docutils literal notranslate"><span class="pre">path</span></code> <strong>is</strong> auto-resolved to
its target folder. This is the exception to the “no automatic resolution”
rule. Functions affected:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">drive_ls(path,</span> <span class="pre">...)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drive_create(name,</span> <span class="pre">path,</span> <span class="pre">...)</span></code> and its convenience wrappers <code class="docutils literal notranslate"><span class="pre">drive_mkdir()</span></code>
and <code class="docutils literal notranslate"><span class="pre">shortcut_create()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drive_cp(file,</span> <span class="pre">path,</span> <span class="pre">...)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drive_mv(file,</span> <span class="pre">path,</span> <span class="pre">...)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drive_upload(media,</span> <span class="pre">path,</span> <span class="pre">...)</span></code> and its close friend <code class="docutils literal notranslate"><span class="pre">drive_put()</span></code></p></li>
</ul>
</li>
</ul>
<p>Further reading about changes to the Drive folder model:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://workspace.google.com/blog/product-announcements/simplifying-google-drives-folder-structure-and-sharing-models">Simplifying Google Drive’s folder structure and sharing models</a></p></li>
<li><p><a class="reference external" href="https://developers.google.com/drive/api/v3/ref-single-parent">Single-parenting behavior changes</a></p></li>
<li><p><a class="reference external" href="https://developers.google.com/drive/api/v3/shortcuts">Create a shortcut to a Drive file</a></p></li>
<li><p>Find files &amp; folders with Google Drive shortcuts: <code class="docutils literal notranslate"><span class="pre">https://support.google.com/drive/answer/9700156</span></code></p></li>
</ul>
</section>
<section id="user-interface">
<h2>User interface<a class="headerlink" href="#user-interface" title="Link to this heading">#</a></h2>
<p>The user interface has gotten more stylish, thanks to the cli package (<a class="reference external" href="https://cli.r-lib.org">https://cli.r-lib.org</a>).
All informational messages, warnings, and errors are now emitted via cli, which uses rlang’s condition functions under-the-hood.</p>
<p><code class="docutils literal notranslate"><span class="pre">googledrive_quiet</span></code> is a new option to suppress informational messages from googledrive.
Unless it’s explicitly set to <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, the default is to message.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">verbose</span></code> argument of all <code class="docutils literal notranslate"><span class="pre">drive_*()</span></code> functions is deprecated and will be removed in a future release.
In the current release, <code class="docutils literal notranslate"><span class="pre">verbose</span> <span class="pre">=</span> <span class="pre">FALSE</span></code> is still honored, but generates a warning.</p>
<p><code class="docutils literal notranslate"><span class="pre">local_drive_quiet()</span></code> and <code class="docutils literal notranslate"><span class="pre">with_drive_quiet()</span></code> are <a class="reference external" href="https://withr.r-lib.org">withr-style</a> convenience helpers for setting <code class="docutils literal notranslate"><span class="pre">googledrive_quiet</span> <span class="pre">=</span> <span class="pre">TRUE</span></code> for some limited scope.</p>
</section>
<section id="other-changes">
<h2>Other changes<a class="headerlink" href="#other-changes" title="Link to this heading">#</a></h2>
<ul>
<li><p>We now share a variety of world-readable, persistent example files on Drive,
for use in examples and documentation. These remote example files complement
the local example files that were already included in googledrive.</p>
<p><code class="docutils literal notranslate"><span class="pre">drive_example()</span></code> is deprecated in favor of these accessors for example files:</p>
<ul class="simple">
<li><p>Plural forms:<code class="docutils literal notranslate"><span class="pre">drive_examples_remote()</span></code>, <code class="docutils literal notranslate"><span class="pre">drive_examples_local()</span></code></p></li>
<li><p>Singular forms: <code class="docutils literal notranslate"><span class="pre">drive_example_remote()</span></code>, <code class="docutils literal notranslate"><span class="pre">drive_example_local()</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">drive_read_string()</span></code> and <code class="docutils literal notranslate"><span class="pre">drive_read_raw()</span></code> are new functions that read the
content of a Drive file directly into R, skipping the step of downloading to a
local file (#81).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drive_reveal(what</span> <span class="pre">=</span> <span class="pre">&quot;property_name&quot;)</span></code> now works for any property found in
the file metadata stored in the <code class="docutils literal notranslate"><span class="pre">drive_resource</span></code> column. The new column is
also simplified in more cases now, e.g. to <code class="docutils literal notranslate"><span class="pre">character</span></code> or <code class="docutils literal notranslate"><span class="pre">logical</span></code>. If the
<code class="docutils literal notranslate"><span class="pre">property_name</span></code> suggests it’s a date-time, we return <code class="docutils literal notranslate"><span class="pre">POSIXct</span></code>.</p></li>
<li><p>We’ve modernized the mechanisms by which the <code class="docutils literal notranslate"><span class="pre">dribble</span></code> class is (or is not)
retained by various data frame operations.
This boils down to updating or adding methods used by the base, dplyr,
pillar/tibble, and vctrs packages.</p>
<p>We focus on compatibility with dplyr &gt;= 1.0.0, which was released a year ago.
googledrive only Suggests dplyr, so all this really means is that <code class="docutils literal notranslate"><span class="pre">dribble</span></code>
manipulation via dplyr now works best with dplyr &gt;= 1.0.0.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">drive_id</span></code> S3 class is now implemented more fully, using the vctrs
package (#93, #364):</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">drive_id</span></code> class will persist after mundane operations, like subsetting.</p></li>
<li><p>You can no longer put strings that are obviously invalid into a <code class="docutils literal notranslate"><span class="pre">drive_id</span></code>
object.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">id</span></code> column of a <code class="docutils literal notranslate"><span class="pre">dribble</span></code> is now an instance of <code class="docutils literal notranslate"><span class="pre">drive_id</span></code>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="dependency-changes">
<h2>Dependency changes<a class="headerlink" href="#dependency-changes" title="Link to this heading">#</a></h2>
<p>cli, lifecycle, and withr are new in Imports.</p>
<p>pillar and vctrs are new in Imports, but were already indirect hard dependencies via tibble.</p>
<p>mockr is new in Suggests.</p>
<p>curl moves from Imports to Suggests, but remains an indirect hard dependency.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="googledrive-1-0-1">
<h1>googledrive 1.0.1<a class="headerlink" href="#googledrive-1-0-1" title="Link to this heading">#</a></h1>
<p>Patch release to modify a test for compatibility with an upcoming release of gargle.</p>
<p><code class="docutils literal notranslate"><span class="pre">drive_share()</span></code> gains awareness of the <code class="docutils literal notranslate"><span class="pre">&quot;fileOrganizer&quot;</span></code> role (#302).</p>
<p>Better handling of filenames that include characters that have special meaning in a regular expression (#292).</p>
<p><code class="docutils literal notranslate"><span class="pre">drive_find()</span></code> explicitly checks for and eliminates duplicate records for a file ID, guarding against repetition in the paginated results returned by the API. It would seem that this should never happen, but there is some indication that it does. (#272, #277, #279, #281)</p>
<p><code class="docutils literal notranslate"><span class="pre">drive_share_anyone()</span></code> is a new convenience wrapper that makes a file readable by “anyone with a link”.</p>
<p><code class="docutils literal notranslate"><span class="pre">as_tibble()</span></code> method for <code class="docutils literal notranslate"><span class="pre">dribble</span></code> objects now passes <code class="docutils literal notranslate"><span class="pre">...</span></code> through, which could apply, for example, to tibble’s <code class="docutils literal notranslate"><span class="pre">.name_repair</span></code> argument.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="googledrive-1-0-0">
<h1>googledrive 1.0.0<a class="headerlink" href="#googledrive-1-0-0" title="Link to this heading">#</a></h1>
<p>The release of version 1.0.0 marks two events:</p>
<ul class="simple">
<li><p>The overall design of googledrive has survived ~2 years on CRAN, with very little need for change. The API and feature set is fairly stable.</p></li>
<li><p>There are changes in the auth interface that are not backwards compatible.</p></li>
</ul>
<p>There is also new functionality that makes it less likely you’ll create multiple files with the same name, without actually meaning to.</p>
<section id="auth-from-gargle">
<h2>Auth from gargle<a class="headerlink" href="#auth-from-gargle" title="Link to this heading">#</a></h2>
<p>googledrive’s auth functionality now comes from the <a class="reference external" href="https://gargle.r-lib.org">gargle package</a>, which provides R infrastructure to work with Google APIs, in general. The same transition is happening in several other packages, such as <a class="reference external" href="https://bigrquery.r-dbi.org">bigrquery</a> and <a class="reference external" href="https://gmailr.r-lib.org">gmailr</a>. This makes user interfaces more consistent and makes two new token flows available in googledrive:</p>
<ul class="simple">
<li><p>Application Default Credentials</p></li>
<li><p>Service account tokens from the metadata server available to VMs running on GCE</p></li>
</ul>
<p>Where to learn more:</p>
<ul class="simple">
<li><p>Help for <a class="reference external" href="https://googledrive.tidyverse.org/reference/drive_auth.html"><code class="docutils literal notranslate"><span class="pre">drive_auth()</span></code></a> <em>all that most users need</em></p></li>
<li><p><em>details for more advanced users</em></p>
<ul>
<li><p><a class="reference external" href="https://googledrive.tidyverse.org/articles/articles/bring-your-own-app.html">Bring your own OAuth app or API key</a></p></li>
<li><p><a class="reference external" href="https://gargle.r-lib.org/articles/get-api-credentials.html">How to get your own API credentials</a></p></li>
<li><p><a class="reference external" href="https://gargle.r-lib.org/articles/non-interactive-auth.html">Non-interactive auth</a></p></li>
<li><p><a class="reference external" href="https://gargle.r-lib.org/articles/auth-from-web.html">Auth when using R in the browser</a></p></li>
<li><p><a class="reference external" href="https://gargle.r-lib.org/articles/how-gargle-gets-tokens.html">How gargle gets tokens</a></p></li>
<li><p><a class="reference external" href="https://gargle.r-lib.org/articles/articles/managing-tokens-securely.html">Managing tokens securely</a></p></li>
</ul>
</li>
</ul>
<section id="changes-that-a-user-will-notice">
<h3>Changes that a user will notice<a class="headerlink" href="#changes-that-a-user-will-notice" title="Link to this heading">#</a></h3>
<p>OAuth2 tokens are now cached at the user level, by default, instead of in <code class="docutils literal notranslate"><span class="pre">.httr-oauth</span></code> in the current project. We recommend that you delete any vestigial <code class="docutils literal notranslate"><span class="pre">.httr-oauth</span></code> files lying around your googledrive projects and re-authorize googledrive, i.e. get a new token, stored in the new way.</p>
<p>googledrive uses a new OAuth “app”, owned by a verified Google Cloud Project entitled “Tidyverse API Packages”, which is the project name you will see on the OAuth consent screen. See our new <a class="reference external" href="https://www.tidyverse.org/google_privacy_policy/">Privacy Policy</a> for details.</p>
<p>The local OAuth2 token key-value store now incorporates the associated Google user when indexing, which makes it easier to switch between Google identities.</p>
<p>The arguments and usage of <code class="docutils literal notranslate"><span class="pre">drive_auth()</span></code> have changed.</p>
<ul>
<li><p>Previous signature (v0.1.3 and earlier)</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">drive_auth</span><span class="p">(</span>
<span class="w">  </span><span class="n">oauth_token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">,</span><span class="w">                       </span><span class="c1"># use `token` now</span>
<span class="w">  </span><span class="n">service_token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">,</span><span class="w">                     </span><span class="c1"># use `path` now</span>
<span class="w">  </span><span class="n">reset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w">                            </span>
<span class="w">  </span><span class="n">cache</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">getOption</span><span class="p">(</span><span class="s">&quot;httr_oauth_cache&quot;</span><span class="p">),</span>
<span class="w">  </span><span class="n">use_oob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">getOption</span><span class="p">(</span><span class="s">&quot;httr_oob_default&quot;</span><span class="p">),</span>
<span class="w">  </span><span class="n">verbose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Current signature (&gt;= v1.0.0)</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">drive_auth</span><span class="p">(</span>
<span class="w">  </span><span class="n">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gargle</span><span class="o">::</span><span class="nf">gargle_oauth_email</span><span class="p">(),</span><span class="w">             </span><span class="c1"># NEW!</span>
<span class="w">  </span><span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">,</span><span class="w">                                      </span><span class="c1"># was `service_token`</span>
<span class="w">  </span><span class="n">scopes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://www.googleapis.com/auth/drive&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># NEW!</span>
<span class="w">  </span><span class="n">cache</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gargle</span><span class="o">::</span><span class="nf">gargle_oauth_cache</span><span class="p">(),</span>
<span class="w">  </span><span class="n">use_oob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gargle</span><span class="o">::</span><span class="nf">gargle_oob_default</span><span class="p">(),</span>
<span class="w">  </span><span class="n">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="w">                                      </span><span class="c1"># was `oauth_token`</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>For full details see the resources listed in <em>Where to learn more</em> above. The change that probably affects the most code is the way to provide a service account token:</p>
<ul class="simple">
<li><p>Previously: <code class="docutils literal notranslate"><span class="pre">drive_auth(service_token</span> <span class="pre">=</span> <span class="pre">&quot;/path/to/your/service-account-token.json&quot;)</span></code> (v0.1.3 and earlier)</p></li>
<li><p>Now: <code class="docutils literal notranslate"><span class="pre">drive_auth(path</span> <span class="pre">=</span> <span class="pre">&quot;/path/to/your/service-account-token.json&quot;)</span></code> (&gt;= v1.0.0)</p></li>
</ul>
<p>Auth configuration has also changed:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">drive_auth_configure()</span></code> is a variant of the now-deprecated <code class="docutils literal notranslate"><span class="pre">drive_auth_config()</span></code> whose explicit and only job is to <em>set</em> aspects of the configuration, i.e. the OAuth app or API key.</p>
<ul>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">drive_oauth_app()</span></code> (new) and <code class="docutils literal notranslate"><span class="pre">drive_api_key()</span></code> to <em>retrieve</em> a user-configured app or API key, if such exist.</p></li>
<li><p>These functions no longer return built-in auth assets, although built-in assets still exist and are used in the absence of user configuration.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">drive_deauth()</span></code> is how you go into a de-authorized state, i.e. send an API key in lieu of a token.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">drive_has_token()</span></code> is a new helper that simply reports whether a token is in place, without triggering the auth flow.</p>
<p>There are other small changes to the low-level developer-facing API:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">generate_request()</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">request_generate()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make_request()</span></code> had been renamed to <code class="docutils literal notranslate"><span class="pre">request_make()</span></code> and is a very thin wrapper around <code class="docutils literal notranslate"><span class="pre">gargle::request_make()</span></code> that only adds googledrive’s user agent.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">build_request()</span></code> has been removed. If you can’t do what you need with <code class="docutils literal notranslate"><span class="pre">request_generate()</span></code>, use <code class="docutils literal notranslate"><span class="pre">gargle::request_develop()</span></code> or <code class="docutils literal notranslate"><span class="pre">gargle::request_build()</span></code> directly.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">process_response()</span></code> has been removed. Instead, use <code class="docutils literal notranslate"><span class="pre">gargle::response_process(response)</span></code>, as we do inside googledrive.</p></li>
</ul>
</section>
</section>
<section id="overwrite-na-true-false-and-drive-put">
<h2><code class="docutils literal notranslate"><span class="pre">overwrite</span> <span class="pre">=</span> <span class="pre">NA</span> <span class="pre">/</span> <span class="pre">TRUE</span> <span class="pre">/</span> <span class="pre">FALSE</span></code> and <code class="docutils literal notranslate"><span class="pre">drive_put()</span></code><a class="headerlink" href="#overwrite-na-true-false-and-drive-put" title="Link to this heading">#</a></h2>
<p>Google Drive doesn’t impose a 1-to-1 relationship between files and filepaths, the way your local file system does. Therefore, when working via the Drive API (instead of in the browser), it’s fairly easy to create multiple Drive files with the same name or filepath, without actually meaning to. This is perfectly valid on Drive, which identifies file by ID, but can be confusing and undesirable for humans.</p>
<p>googledrive v1.0.0 offers some new ways to fight this:</p>
<ul class="simple">
<li><p>All functions that create a new item or rename/move an existing item have
gained an <code class="docutils literal notranslate"><span class="pre">overwrite</span></code> argument.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drive_put()</span></code> is a new convenience wrapper that figures out whether to call
<code class="docutils literal notranslate"><span class="pre">drive_upload()</span></code> or <code class="docutils literal notranslate"><span class="pre">drive_update()</span></code>.</p></li>
</ul>
<p>Changes inspired by #230.</p>
<section id="overwrite-na-true-false">
<h3><code class="docutils literal notranslate"><span class="pre">overwrite</span> <span class="pre">=</span> <span class="pre">NA</span> <span class="pre">/</span> <span class="pre">TRUE</span> <span class="pre">/</span> <span class="pre">FALSE</span></code><a class="headerlink" href="#overwrite-na-true-false" title="Link to this heading">#</a></h3>
<p>These functions gain an <code class="docutils literal notranslate"><span class="pre">overwrite</span></code> argument:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">drive_create()</span></code> <em>this whole function is new</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drive_cp()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drive_mkdir()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drive_mv()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drive_rename()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drive_upload()</span></code></p></li>
</ul>
<p>The default of <code class="docutils literal notranslate"><span class="pre">overwrite</span> <span class="pre">=</span> <span class="pre">NA</span></code> corresponds to the current behaviour, which is to “Just. Do. It.”, i.e. to not consider pre-existing files at all.</p>
<p><code class="docutils literal notranslate"><span class="pre">overwrite</span> <span class="pre">=</span> <span class="pre">TRUE</span></code> requests to move a pre-existing file at the target filepath to the trash, prior to creating the new item. If 2 or more files are found, an error is thrown, because it’s not clear which one(s) to trash.</p>
<p><code class="docutils literal notranslate"><span class="pre">overwrite</span> <span class="pre">=</span> <span class="pre">FALSE</span></code> means the new item will only be created if there is no pre-existing file at that filepath.</p>
<p>Existence checks based on filepath (or name) can be expensive. This is why the default is <code class="docutils literal notranslate"><span class="pre">overwrite</span> <span class="pre">=</span> <span class="pre">NA</span></code>, in addition to backwards compatibility.</p>
</section>
<section id="drive-put">
<h3><code class="docutils literal notranslate"><span class="pre">drive_put()</span></code><a class="headerlink" href="#drive-put" title="Link to this heading">#</a></h3>
<p>Sometimes you have a file you will repeatedly send to Drive, i.e. the first time you run an analysis, you create the file and, when you re-run it, you update the file. Previously this was hard to express with googledrive.</p>
<p><code class="docutils literal notranslate"><span class="pre">drive_put()</span></code> is useful here and refers to the HTTP verb <code class="docutils literal notranslate"><span class="pre">PUT</span></code>: create the thing if it doesn’t exist or, if it does, replace its contents. A good explanation of <code class="docutils literal notranslate"><span class="pre">PUT</span></code> is <a class="reference external" href="https://medium.com/backticks-tildes/restful-api-design-put-vs-patch-4a061aa3ed0b">RESTful API Design – PUT vs PATCH</a>.</p>
<p>In pseudo-code, here’s the basic idea of <code class="docutils literal notranslate"><span class="pre">drive_put()</span></code>:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">target_filepath</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">determined</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="n">`path`</span><span class="p">,</span><span class="w"> </span><span class="n">`name`</span><span class="p">,</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">`media`</span><span class="o">&gt;</span>
<span class="n">hits</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">get</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">Drive</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">target_filepath</span><span class="o">&gt;</span>
<span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="n">hits</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="nf">drive_upload</span><span class="p">(</span><span class="n">media</span><span class="p">,</span><span class="w"> </span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="kc">...</span><span class="p">,</span><span class="w"> </span><span class="n">verbose</span><span class="p">)</span>
<span class="p">}</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="n">exactly</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="n">hit</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="nf">drive_update</span><span class="p">(</span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="n">media</span><span class="p">,</span><span class="w"> </span><span class="kc">...</span><span class="p">,</span><span class="w"> </span><span class="n">verbose</span><span class="p">)</span>
<span class="p">}</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="n">ERROR</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="id1">
<h2>Other changes<a class="headerlink" href="#id1" title="Link to this heading">#</a></h2>
<p>All functions that support <code class="docutils literal notranslate"><span class="pre">...</span></code> as a way to pass more parameters to the Drive API now have “tidy dots semantics”: <code class="docutils literal notranslate"><span class="pre">!!!</span></code> is supported for splicing and <code class="docutils literal notranslate"><span class="pre">!!</span></code> can be used on the LHS of <code class="docutils literal notranslate"><span class="pre">:=</span></code>. Full docs are in <a class="reference external" href="https://rlang.r-lib.org/reference/dyn-dots.html">dynamic dots</a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">drive_find()</span></code> now sorts by “recency”, by default.</p>
<p><code class="docutils literal notranslate"><span class="pre">drive_create()</span></code> is a new function that creates a new empty file, with an optional file type specification (#258, &#64;ianmcook). <code class="docutils literal notranslate"><span class="pre">drive_mkdir()</span></code> becomes a thin wrapper around <code class="docutils literal notranslate"><span class="pre">drive_create()</span></code>, with the file type hard-wired to “folder”.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">drive_mkdir()</span></code>, the optional parent directory is now known as <code class="docutils literal notranslate"><span class="pre">path</span></code> instead of <code class="docutils literal notranslate"><span class="pre">parent</span></code>. This is more consistent with everything else in googledrive, which became very obvious when adding <code class="docutils literal notranslate"><span class="pre">drive_create()</span></code> and the general <code class="docutils literal notranslate"><span class="pre">overwrite</span></code> functionality.</p>
<p><code class="docutils literal notranslate"><span class="pre">drive_empty_trash()</span></code> now exploits the correct endpoint (as opposed to deleting individual files) and is therefore much faster (#203).</p>
<p>Colaboratory notebooks now have some MIME type support, in terms of the <code class="docutils literal notranslate"><span class="pre">type</span></code> argument in various functions (<a class="reference external" href="https://colab.research.google.com/">https://colab.research.google.com/</a>). The internal table of known MIME types includes <code class="docutils literal notranslate"><span class="pre">&quot;application/vnd.google.colab&quot;</span></code>, which is associated with the file extension <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> and the human-oriented nickname <code class="docutils literal notranslate"><span class="pre">&quot;colab&quot;</span></code> (#207).</p>
<p><code class="docutils literal notranslate"><span class="pre">drive_endpoints()</span></code> gains a singular friend, <code class="docutils literal notranslate"><span class="pre">drive_endpoint()</span></code> which returns exactly one endpoint. These helpers index into the internal list of Drive API endpoints with <code class="docutils literal notranslate"><span class="pre">[</span></code> and <code class="docutils literal notranslate"><span class="pre">[[</span></code>, respectively.</p>
</section>
<section id="id2">
<h2>Dependency changes<a class="headerlink" href="#id2" title="Link to this heading">#</a></h2>
<p>R 3.1 is no longer explicitly supported or tested. Our general practice is to support the current release (3.6), devel, and the 4 previous versions of R (3.5, 3.4, 3.3, 3.2). See <a class="reference external" href="https://www.tidyverse.org/blog/2019/04/r-version-support/">Which versions of R do tidyverse packages support?</a>.</p>
<p>gargle and magrittr are newly Imported.</p>
<p>rprojroot has been removed from Suggests, because we can now use a version of testthat recent enough to offer <code class="docutils literal notranslate"><span class="pre">testthat::test_path()</span></code>.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="googledrive-0-1-3">
<h1>googledrive 0.1.3<a class="headerlink" href="#googledrive-0-1-3" title="Link to this heading">#</a></h1>
<p>Minor patch release for compatibility with the imminent release of purrr 0.3.0.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="googledrive-0-1-2">
<h1>googledrive 0.1.2<a class="headerlink" href="#googledrive-0-1-2" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Internal usage of <code class="docutils literal notranslate"><span class="pre">glue::collapse()</span></code> modified to call <code class="docutils literal notranslate"><span class="pre">glue::glue_collapse()</span></code> if glue v1.3.0 or later is installed and <code class="docutils literal notranslate"><span class="pre">glue::collapse()</span></code> otherwise. Eliminates a deprecation warning emanating from glue. (#222 &#64;jimhester)</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="googledrive-0-1-1">
<h1>googledrive 0.1.1<a class="headerlink" href="#googledrive-0-1-1" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>initial CRAN release</p></li>
</ul>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./renv\library\windows\R-4.4\x86_64-w64-mingw32\googledrive"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">googledrive 2.1.1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#googledrive-2-1-0">googledrive 2.1.0</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#syncing-up-with-gargle">Syncing up with gargle</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#shared-drives">Shared drives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#other">Other</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#googledrive-2-0-0">googledrive 2.0.0</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#team-drives-are-dead-long-live-shared-drives">Team Drives are dead! Long live shared drives!</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#single-parenting-and-shortcuts">Single parenting and shortcuts</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#user-interface">User interface</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#other-changes">Other changes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dependency-changes">Dependency changes</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#googledrive-1-0-1">googledrive 1.0.1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#googledrive-1-0-0">googledrive 1.0.0</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#auth-from-gargle">Auth from gargle</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-that-a-user-will-notice">Changes that a user will notice</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overwrite-na-true-false-and-drive-put"><code class="docutils literal notranslate"><span class="pre">overwrite</span> <span class="pre">=</span> <span class="pre">NA</span> <span class="pre">/</span> <span class="pre">TRUE</span> <span class="pre">/</span> <span class="pre">FALSE</span></code> and <code class="docutils literal notranslate"><span class="pre">drive_put()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#overwrite-na-true-false"><code class="docutils literal notranslate"><span class="pre">overwrite</span> <span class="pre">=</span> <span class="pre">NA</span> <span class="pre">/</span> <span class="pre">TRUE</span> <span class="pre">/</span> <span class="pre">FALSE</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#drive-put"><code class="docutils literal notranslate"><span class="pre">drive_put()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Other changes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Dependency changes</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#googledrive-0-1-3">googledrive 0.1.3</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#googledrive-0-1-2">googledrive 0.1.2</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#googledrive-0-1-1">googledrive 0.1.1</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Brittany Cummings
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../../../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>