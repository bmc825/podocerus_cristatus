
<!DOCTYPE html>


<html lang="en" data-content_root="../../../../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>fansi Release Notes &#8212; Chapter 3 Data Analysis</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../../../../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../../../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../../../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../../../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'renv/library/windows/R-4.4/x86_64-w64-mingw32/fansi/NEWS';</script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../../../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../../../../_static/Podocerus_bw.png" class="logo__image only-light" alt="Chapter 3 Data Analysis - Home"/>
    <img src="../../../../../../_static/Podocerus_bw.png" class="logo__image only-dark pst-js-only" alt="Chapter 3 Data Analysis - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../../../../intro.html">
                    Data Analysis of P. cristatus
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../../../../scripts/Load_Packages.html">Load Packages</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../../../01_Population/01_intro.html">Question 1</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../01_Population/01_data_cleaning.html">Data Cleaning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../01_Population/Clustering.html">Cluster Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../01_Population/Population_structure.html">Population Structure Analysis</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../../../02_Occurrence/02_intro.html">Question 2</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../02_Occurrence/02_data_cleaning.html">Data Cleaning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../02_Occurrence/Model_1.html">Model 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../02_Occurrence/Model_2.html">Model 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../02_Occurrence/Model_3.html">Model 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../02_Occurrence/Model_exp.html">Substrate Experiment Model</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../../../03_Camouflage/03_intro.html">Question 3</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../03_Camouflage/03_data_cleaning.html">Data Cleaning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../03_Camouflage/Model_4.html">Model 4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../03_Camouflage/Model_5.html">Model 5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../03_Camouflage/Model_6.html">Model 6</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../../../04_Phylogenetic/04_intro.html">Question 4</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../04_Phylogenetic/Geneious_protocol.html">Geneious Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../04_Phylogenetic/Phylogenetic_analysis.html">Phylogenetic Analysis</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../../../../_sources/renv/library/windows/R-4.4/x86_64-w64-mingw32/fansi/NEWS.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>fansi Release Notes</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v1-0-6">v1.0.6</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v1-0-5">v1.0.5</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v1-0-4">v1.0.4</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v1-0-3">v1.0.3</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v1-0-0-2">v1.0.0-2</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#features">Features</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deprecated-functions">Deprecated Functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#behavior-changes">Behavior Changes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bug-fixes">Bug Fixes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#internal-changes">Internal Changes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-5-0">v0.5.0</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-4-2">v0.4.2</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-4-1">v0.4.1</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-4-0">v0.4.0</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-3-0">v0.3.0</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-2-3">v0.2.3</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-2-2">v0.2.2</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-2-1">v0.2.1</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-2-0">v0.2.0</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-1-0">v0.1.0</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="fansi-release-notes">
<h1>fansi Release Notes<a class="headerlink" href="#fansi-release-notes" title="Link to this heading">#</a></h1>
<section id="v1-0-6">
<h2>v1.0.6<a class="headerlink" href="#v1-0-6" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Fix new <code class="docutils literal notranslate"><span class="pre">-Wformat</span></code> warnings.</p></li>
</ul>
</section>
<section id="v1-0-5">
<h2>v1.0.5<a class="headerlink" href="#v1-0-5" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Address roxygen2 breaking changes:</p>
<ul>
<li><p>Add explicit alias for <code class="docutils literal notranslate"><span class="pre">fansi-package</span></code> now that it is no longer
auto-generated by roxgen2 from the <a class="reference external" href="https://github.com/r-lib/roxygen2/issues/1491"><code class="docutils literal notranslate"><span class="pre">&#64;docType</span> <span class="pre">package</span></code> directive</a>.</p></li>
<li><p>Work around <a class="reference external" href="https://github.com/r-lib/roxygen2/issues/1515">changed behavior for <code class="docutils literal notranslate"><span class="pre">&#64;inheritParams</span></code></a>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="v1-0-4">
<h2>v1.0.4<a class="headerlink" href="#v1-0-4" title="Link to this heading">#</a></h2>
<p>CRAN compiled code warning suppression release.</p>
<ul class="simple">
<li><p>Fix void function declarations and definitions.</p></li>
<li><p>Change <code class="docutils literal notranslate"><span class="pre">sprintf</span></code> to <code class="docutils literal notranslate"><span class="pre">snprintf</span></code>.</p></li>
</ul>
</section>
<section id="v1-0-3">
<h2>v1.0.3<a class="headerlink" href="#v1-0-3" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Address problem uncovered by gcc-12 linters, although the issue itself could
not manifest due to redundancy of checks in the code.</p></li>
</ul>
</section>
<section id="v1-0-0-2">
<h2>v1.0.0-2<a class="headerlink" href="#v1-0-0-2" title="Link to this heading">#</a></h2>
<p>This is a major release and includes some behavior changes.</p>
<section id="features">
<h3>Features<a class="headerlink" href="#features" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>New functions:</p>
<ul>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/26">#26</a> Replacement forms of
<code class="docutils literal notranslate"><span class="pre">substr_cl</span></code> (i.e <code class="docutils literal notranslate"><span class="pre">substr_ctl&lt;-</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">state_at_end</span></code> to compute active state at end of a string.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">close_state</span></code> to generate a closing sequence given an active state.</p></li>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/31">#31</a> <code class="docutils literal notranslate"><span class="pre">trimws_ctl</span></code> as an
equivalent to <code class="docutils literal notranslate"><span class="pre">trimws</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/64">#64</a> <code class="docutils literal notranslate"><span class="pre">normalize_sgr</span></code> converts
compound <em>Control Sequences</em> into normalized form (e.g. “ESC[44;31m”
becomes “ESC[31mESC[44m”) for better compatibility with
<a class="reference external" href="https://github.com/r-lib/crayon"><code class="docutils literal notranslate"><span class="pre">crayon</span></code></a>.  Additionally, most functions
gain a <code class="docutils literal notranslate"><span class="pre">normalize</span></code> parameter so that they may return their output in
normalized form (h/t &#64;krlmlr).</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/74">#74</a><code class="docutils literal notranslate"><span class="pre">substr_ctl</span></code> and related
functions are now all-C instead of a combination of C offset computations and
R level <code class="docutils literal notranslate"><span class="pre">substr</span></code> operations.  This greatly improves performance, particularly
for vectors with many distinct strings.  Despite documentation claiming
otherwise, <code class="docutils literal notranslate"><span class="pre">substr_ctl</span></code> was quite slow in that case.</p></li>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/66">#66</a> Improved grapheme support,
including accounting for them in <code class="docutils literal notranslate"><span class="pre">type=&quot;width&quot;</span></code> mode, as well as a
<code class="docutils literal notranslate"><span class="pre">type=&quot;graphemes&quot;</span></code> mode to measure in graphemes instead of characters.
Implementation is based on heuristics designed to work in most common use
cases.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">html_esc</span></code> gains a <code class="docutils literal notranslate"><span class="pre">what</span></code> parameter to indicate which HTML special characters
should be escaped.</p></li>
<li><p>Many functions gain <code class="docutils literal notranslate"><span class="pre">carry</span></code> and <code class="docutils literal notranslate"><span class="pre">terminate</span></code> parameters to control how <code class="docutils literal notranslate"><span class="pre">fansi</span></code>
generated substrings interact with surrounding formats.</p></li>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/71">#71</a> Functions that write SGR and
OSC are now more parsimonious (see “Behavior Changes” below).</p></li>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/73">#73</a> Default parameter values
retrieved with <code class="docutils literal notranslate"><span class="pre">getOption</span></code> now always have explicit fallback values defined
(h/t &#64;gadenbui).</p></li>
<li><p>Better warnings and error messages, including more granular messages for
<code class="docutils literal notranslate"><span class="pre">unhandled_ctl</span></code> for adjacent <em>Control Sequences</em>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">term.cap</span></code> parameter now accepts “all” as value, like the <code class="docutils literal notranslate"><span class="pre">ctl</span></code> parameter.</p></li>
</ul>
</section>
<section id="deprecated-functions">
<h3>Deprecated Functions<a class="headerlink" href="#deprecated-functions" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>All the “sgr” functions (e.g., <code class="docutils literal notranslate"><span class="pre">substr_sgr</span></code>, <code class="docutils literal notranslate"><span class="pre">strwrap_sgr</span></code>) are deprecated.
They will likely live on indefinitely, but they are of limited usefulness and
with the added support for OSC hyperlinks their name is misleading.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sgr_to_html</span></code> is now <code class="docutils literal notranslate"><span class="pre">to_html</span></code> with slight modifications to semantics; the old
function remains and does not warn about unescaped “&lt;” or “&gt;” in the
input string.</p></li>
</ul>
</section>
<section id="behavior-changes">
<h3>Behavior Changes<a class="headerlink" href="#behavior-changes" title="Link to this heading">#</a></h3>
<p>The major intentional behavior change is to default <code class="docutils literal notranslate"><span class="pre">fansi</span></code> to always recognize
true color CSI SGR sequences (e.g. <code class="docutils literal notranslate"><span class="pre">&quot;ESC[38;2;128;50;245m&quot;</span></code>).  The prior
default was to match the active terminal capabilities, but it is unlikely that
the intent of a user manipulating a string with truecolor sequences is to
interpret them incorrectly, even if their terminal does.  <code class="docutils literal notranslate"><span class="pre">fansi</span></code> will continue
to warn in this case.  To keep the pre-1.0 behavior add <code class="docutils literal notranslate"><span class="pre">&quot;old&quot;</span></code> to the
<code class="docutils literal notranslate"><span class="pre">term.cap</span></code> parameter.</p>
<p>Additionally, <code class="docutils literal notranslate"><span class="pre">to_html</span></code> will now warn if it encounters unescaped HTML special
character “&lt;” or “&gt;” in the input string.</p>
<p>Finally, the 1.0 release is an extensive refactoring of many parts of the
SGR and OSC hyperlink controls (<em>Special Sequences</em>) intake and output
algorithms.  In some cases this means that some <code class="docutils literal notranslate"><span class="pre">fansi</span></code> functions will output
<em>Special Sequences</em> slightly differently than they did before.  In almost all
cases the rendering of the output should remain unchanged, although there are
some corner cases with changes (e.g. in <code class="docutils literal notranslate"><span class="pre">strwrap_ctl</span></code> SGRs embedded in
whitespace sequences don’t break the sequence).</p>
<p>The changes are a side effect of applying more consistent treatment of corner
cases around leading and trailing control sequences and (partially) invalid
control sequences.  Trailing <em>Special Sequences</em> in the output is now omitted as
it would be immediately closed (assuming <code class="docutils literal notranslate"><span class="pre">terminate=TRUE</span></code>, the default).
Leading SGR is interpreted and re-output.</p>
<p>Normally output consistency alone would not be a reason to change behavior, but
in this case the changes should be almost always undetectable in the
<strong>rendered</strong> output, and maintaining old inconsistent behavior in the midst of a
complete refactoring of the internals was beyond my patience.  I apologize if
these behavior changes adversely affect your programs.</p>
<blockquote>
<div><p>WARNING: we will strive to keep rendered appearance of <code class="docutils literal notranslate"><span class="pre">fansi</span></code> outputs
consistent across releases, but the exact bytes used in the output of <em>Special
Sequences</em> may change.</p>
</div></blockquote>
<p>Other changes:</p>
<ul class="simple">
<li><p>Tests may no longer pass with R &lt; 4.0 although the package should still
function correctly.  This is primarily because of changes to the character
width Unicode Database that ships with R, and many of the newly added grapheme
tests touch parts of that database that changed (emoji).</p></li>
<li><p>CSI sequences with more than one “intermediate” byte are now considered valid,
even though they are likely to be very rare, and CSI sequences consume all
subsequent bytes until a valid closing byte or end of string is encountered.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">strip_ctl</span></code> only warns with malformed CSI and OSC if they are reported as
supported via the <code class="docutils literal notranslate"><span class="pre">ctl</span></code> parameter.  If CSI and OSC are indicated as not
supported, but two byte escapes are, the two initial bytes of CSI and OSCs
will be stripped.</p></li>
<li><p>“unknown” encoded strings are no longer translated to UTF-8 in UTF-8 locales
(they are instead assumed to be UTF-8).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nchar_ctl</span></code> preserves <code class="docutils literal notranslate"><span class="pre">dim</span></code>, <code class="docutils literal notranslate"><span class="pre">dimnames</span></code>, and <code class="docutils literal notranslate"><span class="pre">names</span></code> as the base functions do.</p></li>
<li><p>UTF-8 known to be invalid should not be output, even if present in input
(UTF-8 validation is not complete, only sequences that are obviously wrong are
detected).</p></li>
</ul>
</section>
<section id="bug-fixes">
<h3>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">tabs_as_spaces</span></code> to handle sequential tabs, and to perform better on very
wide strings.</p></li>
<li><p>Strings with invalid UTF-8 sequences with “unknown” declared encoding in UTF-8
locales now cause errors instead of being silently translated into byte
escaped versions (e.g. “\xf0\xc2” (2 bytes), used to be interpreted as
“<f0><c2>” (four characters).  These now cause errors as they would have if
they had had “UTF-8” declared encoding.</p></li>
<li><p>In some cases true colors of form “38;2;x;x;x” and “48;2;x;x;x” would only be
partially transcribed.</p></li>
</ul>
</section>
<section id="internal-changes">
<h3>Internal Changes<a class="headerlink" href="#internal-changes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>More aggressive UTF-8 validation, also, invalid UTF-8 code points now advance
only one byte instead of their putative width based on the initial byte.</p></li>
<li><p>Reduce peak memory usage by making some intermediate buffers eligible for
garbage collection prior to native code returning to R.</p></li>
<li><p>Reworked internals to simplify buffer size computation and synchronization, in
some cases this might cause slightly reduced performance.  Please report any
significant performance regressions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nchar_ctl(...)</span></code> is no longer a wrapper for <code class="docutils literal notranslate"><span class="pre">nchar(strip_ctl(...))</span></code> so that it
may correctly support grapheme width calculations.</p></li>
</ul>
</section>
</section>
<section id="v0-5-0">
<h2>v0.5.0<a class="headerlink" href="#v0-5-0" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/65">#65</a>: <code class="docutils literal notranslate"><span class="pre">sgr_to_html</span></code> optionally
converts CSI SGR to classes instead of inline styles (h/t &#64;hadley).</p></li>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/69">#69</a>: <code class="docutils literal notranslate"><span class="pre">sgr_to_html</span></code> is more
disciplined about emitting unnecessary HTML (h/t &#64;hadley).</p></li>
<li><p>New functions:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">sgr_256</span></code>: Display all 256 8-bit colors.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in_html</span></code>: Easily output HTML in a web page.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make_styles</span></code>: Easily produce CSS that matches 8-bit colors.</p></li>
</ul>
</li>
<li><p>Adjust for changes to <code class="docutils literal notranslate"><span class="pre">nchar(...,</span> <span class="pre">type='width')</span></code> for C0-C1 control characters
in R 4.1.</p></li>
<li><p>Restore tests bypassed in 0.4.2.</p></li>
</ul>
</section>
<section id="v0-4-2">
<h2>v0.4.2<a class="headerlink" href="#v0-4-2" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Temporarily bypass tests due to R bug introduced in R-devel 79799.</p></li>
</ul>
</section>
<section id="v0-4-1">
<h2>v0.4.1<a class="headerlink" href="#v0-4-1" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Correctly define/declare global symbols as per WRE 1.6.4.1, (h/t Professor
Ripley, Joshua Ulrich for example fixes).</p></li>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/59">#59</a>: Provide a <code class="docutils literal notranslate"><span class="pre">split.nl</span></code> option
to <code class="docutils literal notranslate"><span class="pre">set_knit_hooks</span></code> to mitigate white space issues when using blackfriday for
the markdown-&gt;html conversion (&#64;krlmlr).</p></li>
</ul>
</section>
<section id="v0-4-0">
<h2>v0.4.0<a class="headerlink" href="#v0-4-0" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Systematized which control sequences are handled specially by adding the <code class="docutils literal notranslate"><span class="pre">ctl</span></code>
parameter to most functions.  Some functions such as <code class="docutils literal notranslate"><span class="pre">strip_ctl</span></code> had existing
parameters that did the same thing (e.g. <code class="docutils literal notranslate"><span class="pre">strip</span></code>, or <code class="docutils literal notranslate"><span class="pre">which</span></code>), and those have
been deprecated in favor of <code class="docutils literal notranslate"><span class="pre">ctl</span></code>.  While technically this is a change in the
API, it is backwards compatible (addresses
<a class="reference external" href="https://github.com/brodieG/fansi/issues/56">#56</a> among and other things).</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">*_sgr</span></code> version of most <code class="docutils literal notranslate"><span class="pre">*_ctl</span></code> functions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nzchar_ctl</span></code> gains the <code class="docutils literal notranslate"><span class="pre">ctl</span></code> parameter.</p></li>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/57">#57</a>: Correctly detect when CSI
sequences are not actually SGR (previously would apply styles from some
non-SGR CSI sequences).</p></li>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/55">#55</a>: <code class="docutils literal notranslate"><span class="pre">strsplit_ctl</span></code> can now work
with <code class="docutils literal notranslate"><span class="pre">ctl</span></code> parameters containing escape sequences provided those sequences
are excluded from by the <code class="docutils literal notranslate"><span class="pre">ctl</span></code> parameter.</p></li>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/54">#54</a>: fix <code class="docutils literal notranslate"><span class="pre">sgr_to_html</span></code> so that
it can handle vector elements with un-terminated SGR sequences (&#64;krlmlr).</p></li>
<li><p>Fix bug in width computation of first line onwards in <code class="docutils literal notranslate"><span class="pre">strwrap_ctl</span></code> when
indent/exdent/prefix/initial widths vary from first to second line.</p></li>
<li><p>Fix wrapping in <code class="docutils literal notranslate"><span class="pre">strwrap2_*(...,</span> <span class="pre">strip.spaces=FALSE)</span></code>, including a bug when
<code class="docutils literal notranslate"><span class="pre">wrap.always=TRUE</span></code> and a line started in a word-whitespace boundary.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">term.cap</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">unhandled_ctl</span></code>.</p></li>
</ul>
</section>
<section id="v0-3-0">
<h2>v0.3.0<a class="headerlink" href="#v0-3-0" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fansi::set_knit_hooks</span></code> makes it easy to automatically convert ANSI CSI SGR
sequences to HTML in Rmarkdown documents.  We also add a vignette that
demonstrates how to do this.</p></li>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/53">#53</a>: fix for systems where
‘char’ is signed (found and fixed by &#64;QuLogic).</p></li>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/52">#52</a>: fix bad compilation under
ICC (&#64;kazumits).</p></li>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/51">#51</a>: documentation improvements
(&#64;krlmlr).</p></li>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/50">#50</a>: run tests on R 3.1 - 3.4
tests for the rc branch only (&#64;krlmlr).</p></li>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/48">#48</a>: malformed call to error
in FANSI_check_enc (&#64;msannell).</p></li>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/47">#47</a>: compatibility with R
versions 3.2.0 and 3.2.1 (&#64;andreadega).</p></li>
</ul>
</section>
<section id="v0-2-3">
<h2>v0.2.3<a class="headerlink" href="#v0-2-3" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/45">#45</a>: add capability to run under
R 3.1 <a class="reference external" href="https://github.com/hadley">hadley</a>, <a class="reference external" href="https://github.com/gaborcsardi">Gábor
Csárdi</a>.</p></li>
<li><p><a class="reference external" href="https://github.com/brodieG/fansi/issues/44">#44</a>: include bright color
support in HTML conversion (h/t <a class="reference external" href="https://github.com/wlandau">Will Landau</a>).</p></li>
</ul>
<p>Other minor fixes (<a class="reference external" href="https://github.com/brodieG/fansi/issues/43">#43</a>, <a class="reference external" href="https://github.com/brodieG/fansi/issues/46">#46</a>).</p>
</section>
<section id="v0-2-2">
<h2>v0.2.2<a class="headerlink" href="#v0-2-2" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Remove valgrind uninitialized string errors by avoiding <code class="docutils literal notranslate"><span class="pre">strsplit</span></code>.</p></li>
<li><p>Reduce R dependency to &gt;= 3.2.x (&#64;gaborcsardi).</p></li>
<li><p>Update tests to handle potential change in <code class="docutils literal notranslate"><span class="pre">substr</span></code> behavior starting with
R-3.6.</p></li>
</ul>
</section>
<section id="v0-2-1">
<h2>v0.2.1<a class="headerlink" href="#v0-2-1" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>All string inputs are now encoded to UTF-8, not just those that are used in
width calculations.</p></li>
<li><p>UTF-8 tests skipped on Solaris.</p></li>
</ul>
</section>
<section id="v0-2-0">
<h2>v0.2.0<a class="headerlink" href="#v0-2-0" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">strsplit_ctl</span></code>.</p></li>
</ul>
</section>
<section id="v0-1-0">
<h2>v0.1.0<a class="headerlink" href="#v0-1-0" title="Link to this heading">#</a></h2>
<p>Initial release.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./renv\library\windows\R-4.4\x86_64-w64-mingw32\fansi"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v1-0-6">v1.0.6</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v1-0-5">v1.0.5</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v1-0-4">v1.0.4</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v1-0-3">v1.0.3</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v1-0-0-2">v1.0.0-2</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#features">Features</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deprecated-functions">Deprecated Functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#behavior-changes">Behavior Changes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bug-fixes">Bug Fixes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#internal-changes">Internal Changes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-5-0">v0.5.0</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-4-2">v0.4.2</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-4-1">v0.4.1</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-4-0">v0.4.0</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-3-0">v0.3.0</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-2-3">v0.2.3</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-2-2">v0.2.2</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-2-1">v0.2.1</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-2-0">v0.2.0</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#v0-1-0">v0.1.0</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Brittany Cummings
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../../../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>