
<!DOCTYPE html>


<html lang="en" data-content_root="../../../../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>haven 2.5.4 &#8212; Chapter 3 Data Analysis</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../../../../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../../../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../../../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../../../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'renv/library/windows/R-4.4/x86_64-w64-mingw32/haven/NEWS';</script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../../../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../../../../_static/Podocerus_bw.png" class="logo__image only-light" alt="Chapter 3 Data Analysis - Home"/>
    <img src="../../../../../../_static/Podocerus_bw.png" class="logo__image only-dark pst-js-only" alt="Chapter 3 Data Analysis - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../../../../intro.html">
                    Data Analysis of P. cristatus
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../../../../scripts/Load_Packages.html">Load Packages</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../../../01_Population/01_intro.html">Question 1</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../01_Population/01_data_cleaning.html">Data Cleaning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../01_Population/Clustering.html">Cluster Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../01_Population/Population_structure.html">Population Structure Analysis</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../../../02_Occurrence/02_intro.html">Question 2</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../02_Occurrence/02_data_cleaning.html">Data Cleaning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../02_Occurrence/Model_1.html">Model 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../02_Occurrence/Model_2.html">Model 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../02_Occurrence/Model_3.html">Model 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../02_Occurrence/Model_exp.html">Substrate Experiment Model</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../../../03_Camouflage/03_intro.html">Question 3</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../03_Camouflage/03_data_cleaning.html">Data Cleaning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../03_Camouflage/Model_4.html">Model 4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../03_Camouflage/Model_5.html">Model 5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../03_Camouflage/Model_6.html">Model 6</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../../../04_Phylogenetic/04_intro.html">Question 4</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../04_Phylogenetic/Geneious_protocol.html">Geneious Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../04_Phylogenetic/Phylogenetic_analysis.html">Phylogenetic Analysis</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../../../../_sources/renv/library/windows/R-4.4/x86_64-w64-mingw32/haven/NEWS.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>haven 2.5.4</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">haven 2.5.4</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-5-3">haven 2.5.3</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-5-2">haven 2.5.2</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-5-1">haven 2.5.1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-5-0">haven 2.5.0</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#new-author">New author</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#file-writing-improvements">File writing improvements</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#other-improvements-and-fixes">Other improvements and fixes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dependency-changes">Dependency changes</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-4-3">haven 2.4.3</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-4-2">haven 2.4.2</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-4-1">haven 2.4.1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-4-0">haven 2.4.0</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#new-features">New features</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#minor-improvements-and-bug-fixes">Minor improvements and bug fixes</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-3-1">haven 2.3.1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-3-0">haven 2.3.0</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-2-0">haven 2.2.0</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#partial-reading">Partial reading</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Minor improvements and bug fixes</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-1-1">haven 2.1.1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-1-0">haven 2.1.0</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#improved-labelling">Improved labelling</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Minor improvements and bug fixes</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-0-0">haven 2.0.0</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#breaking-changes">BREAKING CHANGES</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#minor-improvements">Minor improvements</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-1-1-2">haven 1.1.2</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-1-1-1">haven 1.1.1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-1-1-0">haven 1.1.0</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-1-0-0">haven 1.0.0</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-0-2-0">haven 0.2.0</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-0-1-1">haven 0.1.1</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="haven-2-5-4">
<h1>haven 2.5.4<a class="headerlink" href="#haven-2-5-4" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Fix for upcoming R-devel change.</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-2-5-3">
<h1>haven 2.5.3<a class="headerlink" href="#haven-2-5-3" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Fix for upcoming R-devel change.</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-2-5-2">
<h1>haven 2.5.2<a class="headerlink" href="#haven-2-5-2" title="Link to this heading">#</a></h1>
<ul>
<li><p>Updated to ReadStat 1.1.9.</p>
<ul class="simple">
<li><p>Fix various SAS catalog file reading bugs (#529, #653, #680, #696, #705).</p></li>
<li><p>Increase maximum SAS page file size to 16MiB (#697).</p></li>
<li><p>Ignore invalid SAV timestamp strings (#683).</p></li>
<li><p>Fix compiler warnings (#707).</p></li>
</ul>
</li>
<li><p>The experimental <code class="docutils literal notranslate"><span class="pre">write_sas()</span></code> function has been deprecated (#224). The
sas7bdat file format is complex and undocumented, and as such writing SAS
files is not officially supported by ReadStat. <code class="docutils literal notranslate"><span class="pre">write_xpt()</span></code> should be used
instead - it produces files in the SAS transport format, which has
limitations but will be reliably read by SAS.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_*()</span></code> functions gain a new <code class="docutils literal notranslate"><span class="pre">adjust_tz</span></code> argument to allow more control
over time zone conversion for date-time variables (#702). Thanks to &#64;jmobrien
for the detailed issue and feedback.</p>
<p>Stata, SPSS and SAS do not have a concept of time zone. Since haven 2.4.0
date-time values in non-UTC time zones are implicitly converted when writing
to ensure the time displayed in Stata/SPSS/SAS will match the time displayed
to the user in R (see #555). This is the behaviour when <code class="docutils literal notranslate"><span class="pre">adjust_tz</span> <span class="pre">=</span> <span class="pre">TRUE</span></code>
(the default). Although this is in line with general user expectations it can
cause issues when the time zone is important, for e.g. when looking at
differences between time points, since the underlying numeric data is changed
to preserve the displayed time. Use <code class="docutils literal notranslate"><span class="pre">adjust_tz</span> <span class="pre">=</span> <span class="pre">FALSE</span></code> to write the time as
the corresponding UTC value, which will appear different to the user but
preserves the underlying numeric data.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_*()</span></code> functions previously returned the data frame with minor
alterations made to date-time variables. These functions now invisibly return
the original input data frame unchanged (&#64;jmobrien, #702).</p></li>
<li><p>Fix bug in string variable width calculation that treated <code class="docutils literal notranslate"><span class="pre">NA</span></code> values as width
2. <code class="docutils literal notranslate"><span class="pre">NA</span></code> values are now treated as blanks for width calculations (#699).</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-2-5-1">
<h1>haven 2.5.1<a class="headerlink" href="#haven-2-5-1" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>All <code class="docutils literal notranslate"><span class="pre">labelled()</span></code> vectors now have left-aligned column headers when printing
in tibbles for better alignment with labels (#676).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_*()</span></code> now accept functions as well as strings in the
<code class="docutils literal notranslate"><span class="pre">.name_repair</span></code> argument in line with the documentation. Previously they only
supported string values (#684).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_sav()</span></code> variable name validation no longer treats all non-ASCII
characters as invalid (#689).</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-2-5-0">
<h1>haven 2.5.0<a class="headerlink" href="#haven-2-5-0" title="Link to this heading">#</a></h1>
<section id="new-author">
<h2>New author<a class="headerlink" href="#new-author" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>&#64;gorcha is now a haven author in recognition of his significant and sustained
contributions.</p></li>
</ul>
</section>
<section id="file-writing-improvements">
<h2>File writing improvements<a class="headerlink" href="#file-writing-improvements" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>All <code class="docutils literal notranslate"><span class="pre">write_</span></code> functions can now write custom variable widths by setting the
<code class="docutils literal notranslate"><span class="pre">width</span></code> attribute (#650).</p></li>
<li><p>When writing files, the minimum width for character variables is now 1. This
fixes issues with statistical software reading blank character variables with
width 0 (#650).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_dta()</span></code> now uses strL when strings are too long to be stored in an str#
variable (#437). strL is used when strings are longer than 2045 characters by
default, which matches Stata’s behaviour, but this can be reduced with the
<code class="docutils literal notranslate"><span class="pre">strl_threshold</span></code> argument.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_xpt()</span></code> can now write dataset labels with the <code class="docutils literal notranslate"><span class="pre">label</span></code> argument,  which
defaults to the <code class="docutils literal notranslate"><span class="pre">label</span></code> attribute of the input data frame, if present (#562).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_sav()</span></code> now checks for case-insensitive duplicate variable names
(&#64;juansebastianl, #641) and verifies that variable names are valid SPSS
variables.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">compress</span></code> argument for <code class="docutils literal notranslate"><span class="pre">write_sav()</span></code> now supports all 3 SPSS compression
modes specified as a character string - “byte”, “none” and “zsav” (#614).
<code class="docutils literal notranslate"><span class="pre">TRUE</span></code> and <code class="docutils literal notranslate"><span class="pre">FALSE</span></code> can be used for backwards compatibility, and correspond to
the “zsav” and “none” options respectively.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_sav()</span></code> successfully writes user missing values and ranges for
<code class="docutils literal notranslate"><span class="pre">labelled()</span></code> integer vectors (#596).</p></li>
<li><p>POSIXct and POSIXlt values with no time component (e.g. “2010-01-01”) were
being converted to <code class="docutils literal notranslate"><span class="pre">NA</span></code> when attempting to convert the output timezone to UTC.
These now output successfully (#634).</p></li>
<li><p>Fix bug in output timezone conversion that was causing variable labels and
other variable attributes to disappear (#624).</p></li>
</ul>
</section>
<section id="other-improvements-and-fixes">
<h2>Other improvements and fixes<a class="headerlink" href="#other-improvements-and-fixes" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Updated to ReadStat 1.1.8 RC.</p>
<ul>
<li><p>Fix bug when writing formats to XPT files (#650).</p></li>
<li><p>Fix off by one error in indexing for strL variables (#437).</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">labelled()</span></code> vectors now throw a warning when combining two vectors with
conflicting labels (#667).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">zap_labels()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">user_na</span></code> argument to control whether user-defined
missing values are converted to <code class="docutils literal notranslate"><span class="pre">NA</span></code> or left as is (#638).</p></li>
<li><p>vctrs casting and coercion generics now do less work when working with two
identical <code class="docutils literal notranslate"><span class="pre">labelled()</span></code> vectors. This significantly improves performance when
working with <code class="docutils literal notranslate"><span class="pre">labelled()</span></code> vectors in grouped data frames (#658).</p></li>
<li><p>Errors and warnings now use <code class="docutils literal notranslate"><span class="pre">cli_abort()</span></code> and <code class="docutils literal notranslate"><span class="pre">cli_warning()</span></code> (#661).</p></li>
</ul>
</section>
<section id="dependency-changes">
<h2>Dependency changes<a class="headerlink" href="#dependency-changes" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>R 3.4 is now the minimum supported version, in line with <a class="reference external" href="https://www.tidyverse.org/blog/2019/04/r-version-support/">tidyverse  policy</a>.</p></li>
<li><p>cli &gt;= 3.0.0 has been added to Imports to support new error messaging.</p></li>
<li><p>lifecycle has been added to Imports, and is now used to manage deprecations.</p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-2-4-3">
<h1>haven 2.4.3<a class="headerlink" href="#haven-2-4-3" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Fix build failure on Solaris.</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-2-4-2">
<h1>haven 2.4.2<a class="headerlink" href="#haven-2-4-2" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Updated to ReadStat 1.1.7 RC (#620).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_dta()</span></code> no longer crashes if it sees StrL variables with missing values
(&#64;gorcha, #594, #600, #608).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_dta()</span></code> now correctly handles “labelled”-class numeric (double) variables
that don’t have value labels (&#64;jmobrien, #606, #609).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_dta()</span></code> now allows variable names up to 32 characters (&#64;sbae, #605).</p></li>
<li><p>Can now correctly combine <code class="docutils literal notranslate"><span class="pre">labelled_spss()</span></code> with identical labels
(&#64;gorcha, #599).</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-2-4-1">
<h1>haven 2.4.1<a class="headerlink" href="#haven-2-4-1" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Fix buglet when combining <code class="docutils literal notranslate"><span class="pre">labelled()</span></code> with identical labels.</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-2-4-0">
<h1>haven 2.4.0<a class="headerlink" href="#haven-2-4-0" title="Link to this heading">#</a></h1>
<section id="new-features">
<h2>New features<a class="headerlink" href="#new-features" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">labelled_spss()</span></code> gains full vctrs support thanks to the hard work of &#64;gorcha
(#527, #534, #538, #557). This means that they should now work seamlessly
in dplyr 1.0.0, tidyr 1.0.0 and other packages that use vctrs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">labelled()</span></code> vectors are more permissive when concatenating; output labels
will be a combination of the left-hand and the right-hand side, preferring
values assigned to the left-hand side (#543).</p></li>
<li><p>Date-times are no longer forced to UTC, but instead converted to the
equivalent UTC (#555). This should ensure that you see the same date-time
in R and in Stata/SPSS/SAS.</p></li>
</ul>
</section>
<section id="minor-improvements-and-bug-fixes">
<h2>Minor improvements and bug fixes<a class="headerlink" href="#minor-improvements-and-bug-fixes" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Updated to ReadStat 1.1.5. Most importantly this includes support for
SAS binary compression.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_factor(levels</span> <span class="pre">=</span> <span class="pre">&quot;values&quot;)</span></code> preserves values of unlabelled elements (#570).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">labelled_spss()</span></code> is a little stricter: it prevents <code class="docutils literal notranslate"><span class="pre">na_range</span></code> and <code class="docutils literal notranslate"><span class="pre">na_value</span></code>
from containing missing values, and ensures that <code class="docutils literal notranslate"><span class="pre">na_range</span></code> is in the correct
order (#574).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_spss()</span></code> now reads NA values and ranges of character variables (#409).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_dta()</span></code> now correctly writes tagged NAs (including tagged NAs in
labels) (#583) and once again validates length of variables names (#485).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_*()</span></code> now validate file and variable metadata with ReadStat. This
should prevent many invalid files from being written (#408). Additionally,
validation failures now provide more details about the source of the problem
(e.g. the column name of the problem) (#463).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_sav(compress</span> <span class="pre">=</span> <span class="pre">FALSE)</span></code> now uses SPSS bytecode compression instead of
the rarely-used uncompressed mode. <code class="docutils literal notranslate"><span class="pre">compress</span> <span class="pre">=</span> <span class="pre">TRUE</span></code> continues to use the
newer (and not universally supported, but more compact) zlib format
(&#64;oliverbock, #544).</p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-2-3-1">
<h1>haven 2.3.1<a class="headerlink" href="#haven-2-3-1" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Add missing methods so <code class="docutils literal notranslate"><span class="pre">median()</span></code>, <code class="docutils literal notranslate"><span class="pre">quantile()</span></code> and <code class="docutils literal notranslate"><span class="pre">summary()</span></code> work
once more (#520).</p></li>
<li><p>Add missing cast methods (#522).</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-2-3-0">
<h1>haven 2.3.0<a class="headerlink" href="#haven-2-3-0" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">labelled()</span></code> gains the necessary support to work seemlessly in dplyr 1.0.0,
tidyr 1.0.0, and other packages that use vctrs (&#64;mikmart, #496).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">labelled()</span></code> vectors now explicitly inherit from the corresponding base
types (e.g. integer, double, or character) (#509).</p></li>
<li><p>ReadStat update, including <code class="docutils literal notranslate"><span class="pre">read_sas()</span></code> supports for “any” encoding (#482),
and fixes for compiler warnings.</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-2-2-0">
<h1>haven 2.2.0<a class="headerlink" href="#haven-2-2-0" title="Link to this heading">#</a></h1>
<section id="partial-reading">
<h2>Partial reading<a class="headerlink" href="#partial-reading" title="Link to this heading">#</a></h2>
<p>Thanks to the hard work of &#64;mikmart, all <code class="docutils literal notranslate"><span class="pre">read_*()</span></code> functions gain three new arguments that allow you to read in only part of a large file:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">col_select</span></code>: selects columns to read with a tidyselect interface (#248).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">skip</span></code>: skips rows before reading data (#370).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_max</span></code>: limits the number of rows to read.</p></li>
</ul>
<p>This also brings with it a deprecation: <code class="docutils literal notranslate"><span class="pre">cols_only</span></code> in <code class="docutils literal notranslate"><span class="pre">read_sas()</span></code> has been deprecated in favour of the new <code class="docutils literal notranslate"><span class="pre">col_select</span></code> argument.</p>
</section>
<section id="id1">
<h2>Minor improvements and bug fixes<a class="headerlink" href="#id1" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">as_factor()</span></code> allows non-unique labels when <code class="docutils literal notranslate"><span class="pre">levels</span> <span class="pre">=</span> <span class="pre">&quot;label&quot;</span></code>. This fixes
a particularly annoying printing bug (#424, &#64;gergness)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_sas()</span></code> now supports (IS|E|B)8601(DT|DA|TM) date/time formats (&#64;mikmart).</p></li>
<li><p>All <code class="docutils literal notranslate"><span class="pre">write_</span></code> functions gain a <code class="docutils literal notranslate"><span class="pre">.name_repair</span></code> argument that controls
what happens when the input dataset has repeated column names (#436).</p></li>
<li><p>All <code class="docutils literal notranslate"><span class="pre">write_</span></code> functions can now write labelled vectors with <code class="docutils literal notranslate"><span class="pre">NULL</span></code> labels
(#442).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_dta()</span></code> can now write dataset labels with the <code class="docutils literal notranslate"><span class="pre">label</span></code> argument,
which defaults to the <code class="docutils literal notranslate"><span class="pre">label</span></code> attribute of the input data frame, if present
(&#64;gorcha, #449).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_dta()</span></code> works better with Stata 15, thanks to updated ReadStat (#461)</p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-2-1-1">
<h1>haven 2.1.1<a class="headerlink" href="#haven-2-1-1" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Fixes for R CMD check</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-2-1-0">
<h1>haven 2.1.0<a class="headerlink" href="#haven-2-1-0" title="Link to this heading">#</a></h1>
<section id="improved-labelling">
<h2>Improved labelling<a class="headerlink" href="#improved-labelling" title="Link to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">labelled</span></code> objects get pretty printing that shows the labels and NA values when inside of a <code class="docutils literal notranslate"><span class="pre">tbl_df</span></code>. Turn this behaviour off with behavior using <code class="docutils literal notranslate"><span class="pre">option(haven.show_pillar_labels</span> <span class="pre">=</span> <span class="pre">FALSE)</span></code> (#340, &#64;gergness).</p>
<p><code class="docutils literal notranslate"><span class="pre">labelled()</span></code> and <code class="docutils literal notranslate"><span class="pre">labelled_spss()</span></code> now allow <code class="docutils literal notranslate"><span class="pre">NULL</span></code> labels. This makes both classes more flexible, allowing you to use them for their other attributes (#219).</p>
<p><code class="docutils literal notranslate"><span class="pre">labelled()</span></code> tests that value labels are unique (&#64;larmarange, #364)</p>
</section>
<section id="id2">
<h2>Minor improvements and bug fixes<a class="headerlink" href="#id2" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">as_factor()</span></code>:</p>
<ul>
<li><p>Is faster when input doesn’t contain any missing values (&#64;hughparsonage).</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">labelled</span></code> method for backward compatbility (#414).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data.frame</span></code> method now correctly passes <code class="docutils literal notranslate"><span class="pre">...</span></code> along (#407, &#64;zkamvar).</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_dta()</span></code> now checks that the labelled values are integers, not the
values themselves (#401).</p></li>
<li><p>Updated to latest ReadStat from &#64;evanmiller:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">read_por()</span></code> can now read files from SPSS 25 (#412)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_por()</span></code> now uses base-30 instead of base-10 for the exponent (#413)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_sas()</span></code> can read zero column file (#420)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_sav()</span></code> reads long strings (#381)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_sav()</span></code> has greater memory limit allowing it to read more labels (#418)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_spss()</span></code> reads long variable labels (#422)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_sav()</span></code> no longer creates incorrect column names when &gt;10k columns (#410)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_sav()</span></code> no longer crashes when writing long label names (#395)</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-2-0-0">
<h1>haven 2.0.0<a class="headerlink" href="#haven-2-0-0" title="Link to this heading">#</a></h1>
<section id="breaking-changes">
<h2>BREAKING CHANGES<a class="headerlink" href="#breaking-changes" title="Link to this heading">#</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">labelled()</span></code> and <code class="docutils literal notranslate"><span class="pre">labelled_spss()</span></code> now produce objects with class
“haven_labelled” and “haven_labelled_spss”. Previously, the “labelled”
class name clashed with the labelled class defined by Hmisc (#329).</p>
<p>Unfortunately I couldn’t come up with a way to fix this problem except
to change the class name; it seems reasonable that haven should be the one
to change names given that Hmisc has been around much longer. This
will require some changes to packages that use haven, but shouldn’t
affect user code.</p>
</li>
</ul>
</section>
<section id="minor-improvements">
<h2>Minor improvements<a class="headerlink" href="#minor-improvements" title="Link to this heading">#</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">labelled()</span></code> and <code class="docutils literal notranslate"><span class="pre">labelled_spss()</span></code> now support adding the <code class="docutils literal notranslate"><span class="pre">label</span></code>
attribute to the resulting object. The <code class="docutils literal notranslate"><span class="pre">label</span></code> is a short,
human-readable description of the object, and is now also used
when printing, and can be easily removed using the new <code class="docutils literal notranslate"><span class="pre">zap_label()</span></code>
function. (#362, &#64;huftis)</p>
<p>Previously, the <code class="docutils literal notranslate"><span class="pre">label</span></code> attribute was supported both when reading
and writing SPSS files, but it was not possible to actually create
objects in R having the <code class="docutils literal notranslate"><span class="pre">label</span></code> attribute using the constructors
<code class="docutils literal notranslate"><span class="pre">labelled()</span></code> or <code class="docutils literal notranslate"><span class="pre">labelled_spss()</span></code>.</p>
</li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-1-1-2">
<h1>haven 1.1.2<a class="headerlink" href="#haven-1-1-2" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>haven can read and write non-ASCII paths in R 3.5 (#371).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">labelled_spss</span></code> objects preserve their attributes when subsetted
(#360, &#64;gergness).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_sav()</span></code> gains an <code class="docutils literal notranslate"><span class="pre">encoding</span></code> argument to override the encoding stored in
the file (#305). <code class="docutils literal notranslate"><span class="pre">read_sav()</span></code> can now read <code class="docutils literal notranslate"><span class="pre">.zsav</span></code> files (#338).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_*()</span></code> functions now invisibly return the input data frame
(as documented) (#349, &#64;austensen).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_dta()</span></code> allows non-ASCII variable labels for version 14 and above
(#383). It also uses a less strict check for integers so that a
labelled double containing only integer values can written (#343).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_sav()</span></code> produces <code class="docutils literal notranslate"><span class="pre">.zsav</span></code> files when <code class="docutils literal notranslate"><span class="pre">compress</span> <span class="pre">=</span> <span class="pre">TRUE</span></code> (#338).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_xpt()</span></code> can now set the “member” name, which defaults to the file name
san extension (#328).</p></li>
<li><p>Update to latest readstat.</p>
<ul>
<li><p>Fixes out of memory error (#342)</p></li>
<li><p>Now supports reading and writing stata 15 files (#339)</p></li>
<li><p>Negative integer labelled values were tagged as missing (#367)</p></li>
</ul>
</li>
<li><p>Fix for when <code class="docutils literal notranslate"><span class="pre">as_factor()</span></code> with option <code class="docutils literal notranslate"><span class="pre">levels=&quot;labels&quot;</span></code> is used on tagged NAs
(#340, &#64;gergness)</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-1-1-1">
<h1>haven 1.1.1<a class="headerlink" href="#haven-1-1-1" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Update to latest readstat. Includes:</p>
<ul>
<li><p>SPSS: empty charater columns now read as character (#311)</p></li>
<li><p>SPSS: now write long strings (#266)</p></li>
<li><p>Stata: reorder labelled vectors on write (#327)</p></li>
<li><p>State: <code class="docutils literal notranslate"><span class="pre">encoding</span></code> now affects value labels (#325)</p></li>
<li><p>SAS: can now write wide/long rows (#272, #335).</p></li>
<li><p>SAS: can now handle Windows Vietnamese character set (#336)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_por()</span></code> and <code class="docutils literal notranslate"><span class="pre">read_xpt()</span></code> now correctly preserve attributes if
output needs to be reallocated (which is typical behaviour) (#313)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_sas()</span></code> recognises date/times format with trailing separator and width
specifications (#324)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_sas()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">catalog_encoding</span></code> argument so you can independently
specify encoding of data and catalog (#312)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_*()</span></code> correctly measures lengths of non-ASCII labels (#258): this
fixes the cryptic error “A provided string value was longer than the
available storage size of the specified column.”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_dta()</span></code> now checks for bad labels in all columns, not just the first
(#326).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_sav()</span></code> no longer fails on empty factors or factors with an <code class="docutils literal notranslate"><span class="pre">NA</span></code>
level (#301) and writes out more metadata for <code class="docutils literal notranslate"><span class="pre">labelled_spss</span></code> vectors
(#334).</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-1-1-0">
<h1>haven 1.1.0<a class="headerlink" href="#haven-1-1-0" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Update to latest readstat. Includes:</p>
<ul>
<li><p>SAS: support Win baltic code page (#231)</p></li>
<li><p>SAS: better error messages instead of crashes (#234, #270)</p></li>
<li><p>SAS: fix “unable to read error” (#271)</p></li>
<li><p>SPSS: support uppercase time stamps (#230)</p></li>
<li><p>SPSS: fixes for 252-255 byte strings (#226)</p></li>
<li><p>SPSS: fixes for 0 byte strings (#245)</p></li>
</ul>
</li>
<li><p>Share <code class="docutils literal notranslate"><span class="pre">as_factor()</span></code> with forcats package (#256)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_sav()</span></code> once again correctly returns system defined missings
as <code class="docutils literal notranslate"><span class="pre">NA</span></code> (rather than <code class="docutils literal notranslate"><span class="pre">NaN</span></code>) (#223). <code class="docutils literal notranslate"><span class="pre">read_sav()</span></code> and <code class="docutils literal notranslate"><span class="pre">write_sav()</span></code> preserve
SPSS’s display widths (&#64;ecortens).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_sas()</span></code> gains experimental <code class="docutils literal notranslate"><span class="pre">cols_only</span></code> argument to only read in
specified columns (#248).</p></li>
<li><p>tibbles are created with <code class="docutils literal notranslate"><span class="pre">tibble::as_tibble()</span></code>, rather than by “hand” (#229).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_sav()</span></code> checks that factors don’t have levels with &gt;120
characters (#262)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_dta()</span></code> no longer checks that all value labels are at most 32
characters (since this is not a restriction of dta files) (#239).</p></li>
<li><p>All write methds now check that you’re trying to write a data frame (#287).</p></li>
<li><p>Add support for reading (<code class="docutils literal notranslate"><span class="pre">read_xpt()</span></code>) and writing (<code class="docutils literal notranslate"><span class="pre">write_xpt()</span></code>) SAS
transport files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_*</span></code> functions turn ordered factors into labelled vectors (#285)</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-1-0-0">
<h1>haven 1.0.0<a class="headerlink" href="#haven-1-0-0" title="Link to this heading">#</a></h1>
<ul>
<li><p>The ReadStat library is stored in a subdirectory of <code class="docutils literal notranslate"><span class="pre">src</span></code> (#209, &#64;krlmlr).</p></li>
<li><p>Import tibble so that tibbles are printed consistently (#154, &#64;krlmlr).</p></li>
<li><p>Update to latest ReadStat (#65). Includes:</p>
<ul class="simple">
<li><p>Support for binary (aka Ross) compression for SAS (#31).</p></li>
<li><p>Support extended ASCII encoding for Stata (#71).</p></li>
<li><p>Support for Stata 14 files (#75, #212).</p></li>
<li><p>Support for SPSS value labels with more than 8 characters (#157).</p></li>
<li><p>More likely to get an error when attempting to create an invalid
output file (#171).</p></li>
</ul>
</li>
<li><p>Added support for reading and writing variable formats. Similarly to
to variable labels, formats are stored as an attribute on the vector.
Use <code class="docutils literal notranslate"><span class="pre">zap_formats()</span></code> if you want to remove these attributes.
(&#64;gorcha, #119, #123).</p></li>
<li><p>Added support for reading file “label” and “notes”. These are not currently
printed, but are stored in the attributes if you need to access them (#186).</p></li>
<li><p>Added support for “tagged” missing values (in Stata these are called
“extended” and in SAS these are called “special”) which carry an extra
byte of information: a character label from “a” to “z”. The downside of
this change is that all integer columns are now converted to doubles,
to support the encoding of the tag in the payload of a NaN.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">labelled_spss()</span></code> is a subclass of <code class="docutils literal notranslate"><span class="pre">labelled()</span></code> that can model
user missing values from SPSS. These can either be a set of distinct
values, or for numeric vectors, a range. <code class="docutils literal notranslate"><span class="pre">zap_labels()</span></code> strips labels,
and replaces user-defined missing values with <code class="docutils literal notranslate"><span class="pre">NA</span></code>. New <code class="docutils literal notranslate"><span class="pre">zap_missing()</span></code>
just replaces user-defined missing values with <code class="docutils literal notranslate"><span class="pre">NA</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">labelled_spss()</span></code> is potentially dangerous to work with in R because
base functions don’t know about <code class="docutils literal notranslate"><span class="pre">labelled_spss()</span></code> functions so will
return the wrong result in the presence of user-defined missing values.
For this reason, they will only be created by <code class="docutils literal notranslate"><span class="pre">read_spss()</span></code> when
<code class="docutils literal notranslate"><span class="pre">user_na</span> <span class="pre">=</span> <span class="pre">TRUE</span></code> (normally user-defined missings are converted to
NA).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_factor()</span></code> no longer drops the <code class="docutils literal notranslate"><span class="pre">label</span></code> attribute (variable label) when
used (#177, &#64;itsdalmo).</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">as_factor()</span></code> with <code class="docutils literal notranslate"><span class="pre">levels</span> <span class="pre">=</span> <span class="pre">&quot;default</span></code> or <code class="docutils literal notranslate"><span class="pre">levels</span> <span class="pre">=</span> <span class="pre">&quot;both&quot;</span></code> preserves
unused labels (implicit missing) when converting (#172, &#64;itsdalmo). Labels
(and the resulting factor levels) are always sorted by values.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_factor()</span></code> gains a new <code class="docutils literal notranslate"><span class="pre">levels</span> <span class="pre">=</span> <span class="pre">&quot;default&quot;</span></code> mechanism. This uses the
labels where present, and otherwise uses the labels. This is now the
default, as it seems to map better to the semantics of labelled values
in other statistical packages (#81). You can also use <code class="docutils literal notranslate"><span class="pre">levels</span> <span class="pre">=</span> <span class="pre">&quot;both&quot;</span></code>
to combine the value and the label into a single string (#82). It also
gains a method for data frames, so you can easily convert every labelled
column to a factor in one function call.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">vignette(&quot;semantics&quot;,</span> <span class="pre">package</span> <span class="pre">=</span> <span class="pre">&quot;haven&quot;)</span></code> discusses the semantics
of missing values and labelling in SAS, SPSS, and Stata, and how they
are translated into R.</p></li>
<li><p>Support for <code class="docutils literal notranslate"><span class="pre">hms()</span></code> has been moved into the hms package (#162).
Time varibles now have class <code class="docutils literal notranslate"><span class="pre">c(&quot;hms&quot;,</span> <span class="pre">&quot;difftime&quot;)</span></code> and a <code class="docutils literal notranslate"><span class="pre">units</span></code> attribute
with value “secs” (#162).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">labelled()</span></code> is less strict with its checks: you can mix double and integer
value and labels (#86, #110, &#64;lionel-), and <code class="docutils literal notranslate"><span class="pre">is.labelled()</span></code> is now exported
(#124). Putting a labelled vector in a data frame now generates the correct
column name (#193).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_dta()</span></code> now recognises “%d” and custom date types (#80, #130).
It also gains an encoding parameter which you can use to override
the default encoding. This is particularly useful for Stata 13 and below
which did not store the encoding used in the file (#163).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_por()</span></code> now actually works (#35).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_sav()</span></code> now correctly recognises EDATE and JDATE formats as dates (#72).
Variables with format DATE, ADATE, EDATE, JDATE or SDATE are imported as
<code class="docutils literal notranslate"><span class="pre">Date</span></code> variables instead of <code class="docutils literal notranslate"><span class="pre">POSIXct</span></code>. You can now set <code class="docutils literal notranslate"><span class="pre">user_na</span> <span class="pre">=</span> <span class="pre">TRUE</span></code> to
preserve user defined missing values: they will be given class
<code class="docutils literal notranslate"><span class="pre">labelled_spss</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_dta()</span></code>, <code class="docutils literal notranslate"><span class="pre">read_sas()</span></code>, and <code class="docutils literal notranslate"><span class="pre">read_sav()</span></code> have a better test for missing
string values (#79). They can all read from connections and compressed files
(&#64;lionel-, #109)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_sas()</span></code> gains an encoding parameter to overide the encoding stored
in the file if it is incorrect (#176). It gets better argument names (#214).</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">type_sum()</span></code> method for labelled objects so they print nicely in
tibbles.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_dta()</span></code> now verifies that variable names are valid Stata variables
(#132), and throws an error if you attempt to save a labelled vector that
is not an integer (#144). You can choose which <code class="docutils literal notranslate"><span class="pre">version</span></code> of Stata’s file
format to output (#217).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">write_sas()</span></code> allows you to write data frames out to <code class="docutils literal notranslate"><span class="pre">sas7bdat</span></code>
files. This is still somewhat experimental.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_sav()</span></code> writes hms variables to SPSS time variables, and the
“measure” type is set for each variable (#133).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_dta()</span></code> and <code class="docutils literal notranslate"><span class="pre">write_sav()</span></code> support writing date and date/times
(#25, #139, #145). Labelled values are always converted to UTF-8 before
being written out (#87). Infinite values are now converted to missing values
since SPSS and Stata don’t support them (#149). Both use a better test
for missing values (#70).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">zap_labels()</span></code> has been completely overhauled. It now works
(&#64;markriseley, #69), and only drops label attributes; it no longer replaces
labelled values with <code class="docutils literal notranslate"><span class="pre">NA</span></code>s. It also gains a data frame method that zaps
the labels from every column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">print.labelled()</span></code> and <code class="docutils literal notranslate"><span class="pre">print.labelled_spss()</span></code> now display the type.</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-0-2-0">
<h1>haven 0.2.0<a class="headerlink" href="#haven-0-2-0" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>fixed a bug in <code class="docutils literal notranslate"><span class="pre">as_factor.labelled</span></code>, which generated <NA>’s and wrong
labels for integer labels.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">zap_labels()</span></code> now leaves unlabelled vectors unchanged, making it easier
to apply to all columns.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_dta()</span></code> and <code class="docutils literal notranslate"><span class="pre">write_sav()</span></code> take more care to always write output as
UTF-8 (#36)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_dta()</span></code> and <code class="docutils literal notranslate"><span class="pre">write_sav()</span></code> won’t crash if you give them invalid paths,
and you can now use <code class="docutils literal notranslate"><span class="pre">~</span></code> to refer to your home directory (#37).</p></li>
<li><p>Byte variables are now correctly read into integers (not strings, #45),
and missing values are captured correctly (#43).</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">read_stata()</span></code> as alias to <code class="docutils literal notranslate"><span class="pre">read_dta()</span></code> (#52).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_spss()</span></code> uses extension to automatically choose between <code class="docutils literal notranslate"><span class="pre">read_sav()</span></code>
and <code class="docutils literal notranslate"><span class="pre">read_por()</span></code> (#53)</p></li>
<li><p>Updates from ReadStat. Including fixes for various parsing bugs, more
encodings, and better support for large files.</p></li>
<li><p>hms objects deal better with missings when printing.</p></li>
<li><p>Fixed bug causing labels for numeric variables to be read in as
integers and associated error: <code class="docutils literal notranslate"><span class="pre">Error:</span> <span class="pre">`x`</span> <span class="pre">and</span> <span class="pre">`labels`</span> <span class="pre">must</span> <span class="pre">be</span> <span class="pre">same</span> <span class="pre">type</span></code></p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="haven-0-1-1">
<h1>haven 0.1.1<a class="headerlink" href="#haven-0-1-1" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Fixed memory initialisation problems found by valgrind.</p></li>
</ul>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./renv\library\windows\R-4.4\x86_64-w64-mingw32\haven"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">haven 2.5.4</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-5-3">haven 2.5.3</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-5-2">haven 2.5.2</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-5-1">haven 2.5.1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-5-0">haven 2.5.0</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#new-author">New author</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#file-writing-improvements">File writing improvements</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#other-improvements-and-fixes">Other improvements and fixes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dependency-changes">Dependency changes</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-4-3">haven 2.4.3</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-4-2">haven 2.4.2</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-4-1">haven 2.4.1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-4-0">haven 2.4.0</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#new-features">New features</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#minor-improvements-and-bug-fixes">Minor improvements and bug fixes</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-3-1">haven 2.3.1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-3-0">haven 2.3.0</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-2-0">haven 2.2.0</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#partial-reading">Partial reading</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Minor improvements and bug fixes</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-1-1">haven 2.1.1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-1-0">haven 2.1.0</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#improved-labelling">Improved labelling</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Minor improvements and bug fixes</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-2-0-0">haven 2.0.0</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#breaking-changes">BREAKING CHANGES</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#minor-improvements">Minor improvements</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-1-1-2">haven 1.1.2</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-1-1-1">haven 1.1.1</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-1-1-0">haven 1.1.0</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-1-0-0">haven 1.0.0</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-0-2-0">haven 0.2.0</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#haven-0-1-1">haven 0.1.1</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Brittany Cummings
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../../../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>